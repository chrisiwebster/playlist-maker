(this["webpackJsonpplaylist-maker"]=this["webpackJsonpplaylist-maker"]||[]).push([[0],{25:function(e,t,a){},27:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var n,c=a(1),s=a.n(c),r=a(18),i=a.n(r),l=a(20),o=a(7),u=a(2),h=(a(25),a(0)),d=function(e){var t=e.title,a=e.children;return Object(h.jsxs)("header",{children:[a,Object(h.jsx)("h1",{children:t})]})},j=a(8),p=(a(27),function(e){var t=e.handleNavClick,a=e.status;return Object(h.jsxs)("div",{className:"nav-wrapper",children:[Object(h.jsx)("i",{tabIndex:"0",onKeyDown:function(){return t()},onClick:function(){return t()},className:!0===a?"fas fa-times":"fas fa-hamburger"}),Object(h.jsx)("nav",{children:Object(h.jsxs)("ul",{className:a?"navigation active":"navigation",role:"navigation",children:[Object(h.jsx)("li",{onClick:function(){return t()},children:Object(h.jsx)(j.b,{to:"/",className:"nav-item",children:"Home"})}),Object(h.jsx)("li",{onClick:function(){return t()},children:Object(h.jsx)(j.b,{to:"/search",className:"nav-item",children:"Search songs"})}),Object(h.jsx)("li",{onClick:function(){return t()},children:Object(h.jsx)(j.b,{to:"/view-playlists",className:"nav-item",children:"View playlists"})})]})})]})}),m=function(){return Object(h.jsx)("div",{className:"home",children:Object(h.jsx)("h2",{children:"I am home"})})},b=function(e){var t=e.type,a=e.name,n=e.onClick,c=e.className,s=e.id;return Object(h.jsx)("button",{id:s,type:t||"button",className:c,onClick:n,children:a})},f=function(e){var t=e.className,a=e.accessToken,n=e.expiresIn,s=e.playlists,r=e.viewPlaylists,i=e.handleSignIn;return Object(c.useEffect)((function(){document.title="View playlists | Chrisi Webster",r()}),[]),Object(h.jsxs)("div",{className:t,children:[Object(h.jsx)("h2",{children:"PlaylistView"}),!a&&Object(h.jsx)(b,{type:"button",name:"Sign in",id:"sign",onClick:function(){return i()}}),0!==n&&Object(h.jsx)("div",{children:Object(h.jsx)("ul",{children:s.map((function(e){return Object(h.jsx)("li",{children:e.name},e.id)}))})})]})},v=(a(33),a(34),function(e){var t=e.track,a=e.remove,n=e.addTrack,c=e.removeTrack;return Object(h.jsxs)("div",{className:"tracks",children:[Object(h.jsxs)("div",{className:"flex-wrapper",children:[Object(h.jsx)("h3",{children:t.name})," ",a?Object(h.jsx)(b,{type:"submit",name:"-",onClick:function(){return c(t)}}):Object(h.jsx)(b,{type:"submit",name:"+",onClick:function(){return n(t)}})]}),Object(h.jsxs)("p",{children:[t.artist," | ",t.album]})]})}),O=function(e){var t=e.tracks,a=e.addTrack,n=e.removeTrack,c=e.remove;return Object(h.jsx)("div",{className:"track-list",children:t.map((function(e){return Object(h.jsx)(v,{track:e,addTrack:a,removeTrack:n,remove:c},e.id)}))})},y=function(e){var t=e.searchTracks,a=e.addTrack,n=e.message;return Object(h.jsx)("div",{className:"flex-wrapper",children:Object(h.jsxs)("div",{className:"tracks-wrapper",children:[t===[]&&{message:n},Object(h.jsx)(O,{tracks:t,addTrack:a,remove:!1})]})})},x=function(e){var t=e.type,a=e.label,n=e.placeholder,c=e.onChange,s=e.onBlur,r=e.id,i=e.value;return Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:r,children:a}),Object(h.jsx)("input",{id:r,type:t,value:i,placeholder:n,onChange:c,onBlur:s})]})},k=(a(35),function(e){var t=e.handleAPISearch,a=e.accessToken,n=e.expiresIn,c=e.handleSignIn,s=e.searchInput,r=e.handleSearchInput,i=e.handleClearSearchInput;return Object(h.jsxs)("div",{className:"search-buttons",children:[!a&&Object(h.jsx)(b,{type:"button",name:"Sign in",id:"sign",onClick:function(e){return c(e)}}),0!==n&&Object(h.jsxs)("form",{id:"search",onSubmit:function(e){return t(e)},children:[Object(h.jsx)(x,{type:"text",value:s,id:"search",placeholder:"Search for songs",onChange:function(e){return r(e)},onBlur:function(){return i()}}),Object(h.jsx)(b,{type:"submit",name:"Search"})]})]})}),I=function(e){var t=e.updatePlaylistName,a=e.playlistTracks,n=e.savePlaylist,c=e.removeTrack,s=e.playlistName,r=e.setPlaylistTracks,i=e.setPlaylistName,l=e.handleClearNameInput,o=e.playlistInput;return Object(h.jsxs)("form",{id:"playlist-form",onSubmit:function(e){return function(e){e.preventDefault();var t=a.map((function(e){return e.uri}));n(s,t),i("New Playlist"),r([]),l()}(e)},children:[Object(h.jsx)(x,{type:"text",id:"playlist",value:o,onChange:function(e){return t(e)}}),Object(h.jsx)(O,{tracks:a,removeTrack:c,remove:!0}),Object(h.jsx)(b,{type:"submit",name:"Save to Spotify",id:"save-spotify"})]})},S=function(e){var t=e.expiresIn,a=e.accessToken,n=e.handleAPISearch,s=e.handleSignIn,r=e.searchInput,i=e.addTrack,l=e.handleSearchInput,o=e.handleClearSearchInput,u=e.searchTracks,d=e.updatePlaylistName,j=e.removeTrack,p=e.savePlaylist,m=e.setPlaylistName,b=e.playlistTracks,f=e.playlistName,v=e.playlistInput,O=e.setPlaylistTracks,x=e.handleClearNameInput;return Object(c.useEffect)((function(){document.title="Search | Chrisi Webster"})),Object(h.jsxs)("div",{children:[Object(h.jsx)(k,{handleAPISearch:n,accessToken:a,expiresIn:t,handleSearchInput:l,handleClearSearchInput:o,searchInput:r,handleSignIn:s}),0!==t&&Object(h.jsxs)("div",{className:"search-playlist-wrapper",children:[Object(h.jsxs)("div",{className:"search-results-wrapper",children:[Object(h.jsxs)("h2",{children:["Search results (",u.length,")"]}),Object(h.jsx)(y,{searchTracks:u,addTrack:i})]}),u&&Object(h.jsxs)("div",{className:"playlist-wrapper",children:[Object(h.jsx)("h2",{children:"Add to playlist"}),Object(h.jsx)(I,{updatePlaylistName:d,removeTrack:j,savePlaylist:p,setPlaylistName:m,playlistTracks:b,searchTracks:u,playlistName:f,playlistInput:v,setPlaylistTracks:O,handleClearNameInput:x})]})]})]})},N=(a(36),window.location.href),T=0,g=function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),a=t[0],s=t[1],r=Object(c.useState)(),i=Object(o.a)(r,2),j=i[0],b=i[1],v=Object(c.useState)([]),O=Object(o.a)(v,2),y=O[0],x=O[1],k=Object(c.useState)(""),I=Object(o.a)(k,2),g=I[0],P=I[1],w=Object(c.useState)([]),C=Object(o.a)(w,2),A=C[0],B=C[1],_=Object(c.useState)(""),z=Object(o.a)(_,2),E=z[0],J=z[1],D=Object(c.useState)("New Playlist"),V=Object(o.a)(D,2),M=V[0],W=V[1],q=Object(c.useState)([]),F=Object(o.a)(q,2),G=F[0],H=F[1],K=window.location.href.match(/access_token=([^&]*)/),L=window.location.href.match(/expires_in=([^&]*)/);K&&L&&(n=K[1],T=Number(L[1]),localStorage.setItem("accessToken",n),localStorage.setItem("expiresIn",T));var Q=function(){window.location="https://accounts.spotify.com/authorize?client_id=".concat("54d03dd971f04b3e971ec3ffa241645c","&response_type=token&scope=").concat("playlist-read-private playlist-read-collaborative playlist-modify-public","&redirect_uri=").concat(N),setInterval((function(){0===--T&&(n="",localStorage.removeItem("accessToken"),localStorage.removeItem("expiresIn"))}),1e3)};return Object(h.jsxs)("div",{children:[Object(h.jsx)(d,{title:"Playlist Maker",children:Object(h.jsx)(p,{handleNavClick:function(){s(!0!==a)},status:a})}),Object(h.jsxs)(u.c,{children:[Object(h.jsx)(u.a,{path:"/playlist-maker",exact:!0,children:Object(h.jsx)(m,{})}),Object(h.jsx)(u.a,{path:"/playlist-maker/search",exact:!0,children:Object(h.jsx)(S,{handleAPISearch:function(e){e.preventDefault(),fetch("https://api.spotify.com/v1/search?type=track&q=".concat(j,"?limit=50"),{headers:{Authorization:"Bearer ".concat(n)}}).then((function(e){return e.json()})).then((function(e){return e.tracks?(console.log(e),e.tracks.items.map((function(e){return{id:e.id,name:e.name,artist:e.artists[0].name,album:e.album.name,uri:e.uri}}))):[]})).then((function(e){x(e)}))},accessToken:n,expiresIn:T,handleSignIn:Q,searchInput:g,handleSearchInput:function(e){P(e.target.value),b(g)},handleClearSearchInput:function(){P("")},updatePlaylistName:function(e){W(e.target.value),J(M)},removeTrack:function(e){var t=A.filter((function(t){return t.id!==e.id}));B(t)},savePlaylist:function(e,t){if(e&&t.length){var a={Authorization:"Bearer ".concat(n)};return fetch("https://api.spotify.com/v1/me",{headers:a}).then((function(e){return e.json()})).then((function(n){var c=n.id;return fetch("https://api.spotify.com/v1/users/".concat(c,"/playlists"),{headers:a,method:"POST",body:JSON.stringify({name:e})}).then((function(e){return e.json()})).then((function(e){console.log(e);var n=e.id;return fetch("https://api.spotify.com/v1/users/".concat(c,"/playlists/").concat(n,"/tracks"),{headers:a,method:"POST",body:JSON.stringify({uris:t})})}))}))}},setPlaylistName:J,playlistTracks:A,searchTracks:y,playlistName:E,playlistInput:M,addTrack:function(e){A.find((function(e){return e.id===A.id}))||B((function(t){return[].concat(Object(l.a)(t),[e])}))},setPlaylistTracks:B,handleClearNameInput:function(){W("New Playlist")}})}),Object(h.jsx)(u.a,{path:"/playlist-maker/view-playlists",exact:!0,children:Object(h.jsx)(f,{accessToken:n,expiresIn:T,viewPlaylists:function(){var e={Authorization:"Bearer ".concat(n)};return fetch("https://api.spotify.com/v1/me",{headers:e}).then((function(e){return e.json()})).then((function(t){var a=t.id;return fetch("https://api.spotify.com/v1/users/".concat(a,"/playlists?limit=50"),{headers:e,method:"GET"}).then((function(e){return e.json()})).then((function(e){return e.items?(console.log(e.items),e.items.map((function(e){return{id:e.id,name:e.name}}))):[]})).then((function(e){H(e)}))}))},setPlaylists:H,playlists:G,handleSignIn:Q})})]})]})};i.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(j.a,{basename:"/",children:Object(h.jsx)(g,{})})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.0105fec6.chunk.js.map