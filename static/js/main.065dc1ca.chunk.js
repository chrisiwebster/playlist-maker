(this["webpackJsonpplaylist-maker"]=this["webpackJsonpplaylist-maker"]||[]).push([[0],{29:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),s=n(19),r=n.n(s),i=n(15),l=n.n(i),o=n(20),u=n(22),h=n(7),d=n(2),j=n(0),p=function(e){var t=e.title,n=e.children;return Object(j.jsxs)("header",{children:[n,Object(j.jsx)("h1",{children:t})]})},b=n(8),m=(n(29),function(e){var t=e.type,n=e.name,c=e.onClick,a=e.className,s=e.id;return Object(j.jsx)("button",{id:s,type:t||"button",className:a,onClick:c,children:n})}),f=function(e){var t=e.handleNavClick,n=e.status,c=e.expiresIn,a=e.accessToken;return Object(j.jsxs)("div",{className:"nav-wrapper",children:[Object(j.jsxs)("div",{id:"icon-wrapper",children:[Object(j.jsx)("i",{tabIndex:"0",onKeyDown:function(){return t()},onClick:function(){return t()},className:!0===n?"fas fa-times":"fas fa-hamburger"}),""===a&&Object(j.jsx)(b.b,{to:"/",children:Object(j.jsx)(m,{type:"button",name:"Sign in"})}),void 0!==c&&Object(j.jsx)("p",{children:"Signed in"})]}),Object(j.jsx)("nav",{children:Object(j.jsxs)("ul",{className:n?"navigation active":"navigation",role:"navigation",children:[Object(j.jsx)("li",{onClick:function(){return t()},children:Object(j.jsx)(b.c,{to:"/",className:"nav-item",children:"Home"})}),Object(j.jsx)("li",{onClick:function(){return t()},children:Object(j.jsx)(b.c,{to:"/search",className:"nav-item",children:"Search songs"})}),Object(j.jsx)("li",{onClick:function(){return t()},children:Object(j.jsx)(b.c,{to:"/view-playlists",className:"nav-item",children:"View playlists"})})]})})]})},O=function(e){var t=e.checkAccessToken,n=e.handleSignIn,a=e.accessToken,s=e.expiresIn;return Object(c.useEffect)((function(){t()}),[t]),Object(j.jsxs)("div",{className:"home",children:[Object(j.jsx)("h2",{children:"I am home"}),""===a&&Object(j.jsx)(m,{type:"button",name:"Sign in",id:"sign",onClick:function(){return n()}}),void 0!==s&&Object(j.jsx)("p",{children:"You're good to go"})]})},v=function(e){var t=e.className,n=e.accessToken,a=e.expiresIn,s=e.playlists,r=e.viewPlaylists,i=e.checkAccessToken;return Object(c.useEffect)((function(){document.title="View playlists | Chrisi Webster",i(),r()}),[r,i]),Object(j.jsxs)("div",{className:t,children:[Object(j.jsx)("h2",{children:"View your playlists"}),""===n&&Object(j.jsx)("p",{children:"You need to sign in"}),void 0!==a&&Object(j.jsx)("div",{children:Object(j.jsx)("ul",{children:s.map((function(e){return Object(j.jsx)("div",{children:e.name},e.id)}))})})]})},x=(n(35),n(36),function(e){var t=e.track,n=e.remove,c=e.addTrack,a=e.removeTrack;return Object(j.jsxs)("div",{className:"tracks",children:[Object(j.jsxs)("div",{className:"flex-wrapper",children:[Object(j.jsx)("h3",{children:t.name})," ",n?Object(j.jsx)(m,{type:"submit",name:"-",onClick:function(){return a(t)}}):Object(j.jsx)(m,{type:"submit",name:"+",onClick:function(){return c(t)}})]}),Object(j.jsxs)("p",{children:[t.artist," | ",t.album]})]})}),k=function(e){var t=e.tracks,n=e.addTrack,c=e.removeTrack,a=e.remove;return Object(j.jsx)("div",{className:"track-list",children:t.map((function(e){return Object(j.jsx)(x,{track:e,addTrack:n,removeTrack:c,remove:a},e.id)}))})},y=function(e){var t=e.searchTracks,n=e.addTrack,c=e.message;return Object(j.jsx)("div",{className:"flex-wrapper",children:Object(j.jsxs)("div",{className:"tracks-wrapper",children:[t===[]&&{message:c},Object(j.jsx)(k,{tracks:t,addTrack:n,remove:!1})]})})},T=function(e){var t=e.type,n=e.label,c=e.placeholder,a=e.onChange,s=e.onBlur,r=e.id,i=e.value;return Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{htmlFor:r,children:n}),Object(j.jsx)("input",{id:r,type:t,value:i,placeholder:c,onChange:a,onBlur:s})]})},S=(n(37),function(e){var t=e.handleAPISearch,n=e.accessToken,a=e.expiresIn,s=e.searchInput,r=e.handleSearchInput,i=e.handleClearSearchInput,l=e.checkAccessToken;return Object(c.useEffect)((function(){l()}),[l]),Object(j.jsxs)("div",{className:"search-buttons",children:[!n&&Object(j.jsx)("p",{children:"You need to sign in"}),void 0!==a&&Object(j.jsxs)("form",{id:"search",onSubmit:function(e){return t(e)},children:[Object(j.jsx)(T,{type:"text",value:s,id:"search",placeholder:"Search for songs",onChange:function(e){return r(e)},onBlur:function(){return i()}}),Object(j.jsx)(m,{type:"submit",name:"Search"})]})]})}),I=function(e){var t=e.updatePlaylistName,n=e.playlistTracks,c=e.savePlaylist,a=e.removeTrack,s=e.playlistName,r=e.setPlaylistTracks,i=e.setPlaylistName,l=e.handleClearNameInput,o=e.playlistInput;return Object(j.jsxs)("form",{id:"playlist-form",onSubmit:function(e){return function(e){e.preventDefault();var t=n.map((function(e){return e.uri}));c(s,t),i("New Playlist"),r([]),l()}(e)},children:[Object(j.jsx)(T,{type:"text",id:"playlist",value:o,onChange:function(e){return t(e)}}),Object(j.jsx)(k,{tracks:n,removeTrack:a,remove:!0}),Object(j.jsx)(m,{type:"submit",name:"Save to Spotify",id:"save-spotify"})]})},N=function(e){var t=e.expiresIn,n=e.accessToken,a=e.handleAPISearch,s=e.handleSignIn,r=e.searchInput,i=e.addTrack,l=e.handleSearchInput,o=e.handleClearSearchInput,u=e.searchTracks,h=e.updatePlaylistName,d=e.removeTrack,p=e.savePlaylist,b=e.setPlaylistName,m=e.playlistTracks,f=e.playlistName,O=e.playlistInput,v=e.setPlaylistTracks,x=e.handleClearNameInput,k=e.checkAccessToken,T=e.scope,N=e.id;return Object(c.useEffect)((function(){document.title="Search | Chrisi Webster"})),Object(j.jsxs)("div",{children:[Object(j.jsx)(S,{handleAPISearch:a,accessToken:n,expiresIn:t,handleSearchInput:l,handleClearSearchInput:o,searchInput:r,handleSignIn:s,checkAccessToken:k,scope:T,id:N}),void 0!==t&&Object(j.jsxs)("div",{className:"search-playlist-wrapper",children:[Object(j.jsxs)("div",{className:"search-results-wrapper",children:[Object(j.jsxs)("h2",{children:["Search results (",u.length,")"]}),Object(j.jsx)(y,{searchTracks:u,addTrack:i})]}),u&&Object(j.jsxs)("div",{className:"playlist-wrapper",children:[Object(j.jsx)("h2",{children:"Add to playlist"}),Object(j.jsx)(I,{updatePlaylistName:h,removeTrack:d,savePlaylist:p,setPlaylistName:b,playlistTracks:m,searchTracks:u,playlistName:f,playlistInput:O,setPlaylistTracks:v,handleClearNameInput:x})]})]})]})},g=(n(38),function(){var e=Object(c.useState)(!1),t=Object(h.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(),r=Object(h.a)(s,2),i=r[0],b=r[1],m=Object(c.useState)(""),x=Object(h.a)(m,2),k=x[0],y=x[1],T=Object(c.useState)(),S=Object(h.a)(T,2),I=S[0],g=S[1],w=Object(c.useState)([]),P=Object(h.a)(w,2),C=P[0],A=P[1],B=Object(c.useState)(""),E=Object(h.a)(B,2),_=E[0],z=E[1],J=Object(c.useState)([]),D=Object(h.a)(J,2),V=D[0],Y=D[1],M=Object(c.useState)(""),W=Object(h.a)(M,2),q=W[0],F=W[1],G=Object(c.useState)("New Playlist"),H=Object(h.a)(G,2),K=H[0],L=H[1],Q=Object(c.useState)([]),R=Object(h.a)(Q,2),U=R[0],X=R[1],Z=Object(c.useCallback)((function(){var e=window.location.href.match(/access_token=([^&]*)/),t=window.location.href.match(/expires_in=([^&]*)/);e&&t&&(y(e[1]),b(Number(t[1])),setInterval((function(){b((function(e){return e-1})),0===i&&b("")}),1e3))}),[i]),$=function(){window.location="https://accounts.spotify.com/authorize?client_id=".concat("54d03dd971f04b3e971ec3ffa241645c","&response_type=token&scope=").concat("playlist-read-private playlist-read-collaborative playlist-modify-public","&redirect_uri=").concat("https://chrisiwebster.github.io/playlist-maker")},ee=function(e){z(e.target.value),g(_)},te=function(){z("")},ne=function(e){e.preventDefault(),fetch("https://api.spotify.com/v1/search?type=track&q=".concat(I,"&limit=50"),{headers:{Authorization:"Bearer ".concat(k)}}).then((function(e){return e.json()})).then((function(e){return e.tracks?(console.log(e),e.tracks.items.map((function(e){return{id:e.id,name:e.name,artist:e.artists[0].name,album:e.album.name,uri:e.uri}}))):[]})).then((function(e){A(e)}))},ce=function(e){V.find((function(e){return e.id===V.id}))||Y((function(t){return[].concat(Object(u.a)(t),[e])}))},ae=function(e){var t=V.filter((function(t){return t.id!==e.id}));Y(t)},se=function(e){L(e.target.value),F(K)},re=function(){L("New Playlist")},ie=function(e,t){if(e&&t.length){var n={Authorization:"Bearer ".concat(k)};return fetch("https://api.spotify.com/v1/me",{headers:n}).then((function(e){return e.json()})).then((function(c){var a=c.id;return fetch("https://api.spotify.com/v1/users/".concat(a,"/playlists"),{headers:n,method:"POST",body:JSON.stringify({name:e})}).then((function(e){return e.json()})).then((function(e){console.log(e);var c=e.id;return fetch("https://api.spotify.com/v1/users/".concat(a,"/playlists/").concat(c,"/tracks"),{headers:n,method:"POST",body:JSON.stringify({uris:t})})}))}))}},le=Object(c.useCallback)(Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={Authorization:"Bearer ".concat(k)},e.next=3,fetch("https://api.spotify.com/v1/me",{headers:t}).then((function(e){return e.json()})).then((function(e){var n=e.id;return fetch("https://api.spotify.com/v1/users/".concat(n,"/playlists?limit=50"),{headers:t,method:"GET"}).then((function(e){return e.json()})).then((function(e){return e.items?(console.log(e.items),e.items.map((function(e){return{id:e.id,name:e.name}}))):[]})).then((function(e){X(e)}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),[k]);return Object(j.jsxs)("div",{children:[Object(j.jsx)(p,{title:"Playlist Maker",children:Object(j.jsx)(f,{handleNavClick:function(){a(!0!==n)},status:n,expiresIn:i,accessToken:k})}),Object(j.jsxs)(d.c,{children:[Object(j.jsx)(d.a,{exact:!0,path:"/",render:function(){return Object(j.jsx)(O,{checkAccessToken:Z,accessToken:k,expiresIn:i,handleSignIn:$})}}),Object(j.jsx)(d.a,{path:"/search",render:function(){return Object(j.jsx)(N,{checkAccessToken:Z,handleAPISearch:ne,accessToken:k,expiresIn:i,handleSignIn:$,searchInput:_,handleSearchInput:ee,handleClearSearchInput:te,updatePlaylistName:se,removeTrack:ae,savePlaylist:ie,setPlaylistName:F,playlistTracks:V,searchTracks:C,playlistName:q,playlistInput:K,addTrack:ce,setPlaylistTracks:Y,handleClearNameInput:re})}}),Object(j.jsx)(d.a,{exact:!0,path:"/view-playlists",render:function(){return Object(j.jsx)(v,{checkAccessToken:Z,accessToken:k,expiresIn:i,viewPlaylists:le,setPlaylists:X,playlists:U,handleSignIn:$})}})]})]})});r.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(b.a,{basename:"/",children:Object(j.jsx)(g,{})})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.065dc1ca.chunk.js.map