(this["webpackJsonpplaylist-maker"]=this["webpackJsonpplaylist-maker"]||[]).push([[0],{28:function(e,t,n){},30:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),s=n(19),r=n.n(s),i=n(22),l=n(15),o=n.n(l),u=n(20),h=n(7),d=n(2),j=(n(28),n(0)),p=function(e){var t=e.title,n=e.children;return Object(j.jsxs)("header",{children:[n,Object(j.jsx)("h1",{children:t})]})},m=n(8),b=(n(30),function(e){var t=e.handleNavClick,n=e.status;return Object(j.jsxs)("div",{className:"nav-wrapper",children:[Object(j.jsx)("i",{tabIndex:"0",onKeyDown:function(){return t()},onClick:function(){return t()},className:!0===n?"fas fa-times":"fas fa-hamburger"}),Object(j.jsx)("nav",{children:Object(j.jsxs)("ul",{className:n?"navigation active":"navigation",role:"navigation",children:[Object(j.jsx)("li",{onClick:function(){return t()},children:Object(j.jsx)(m.b,{to:"/playlist-maker",className:"nav-item",children:"Home"})}),Object(j.jsx)("li",{onClick:function(){return t()},children:Object(j.jsx)(m.b,{to:"/playlist-maker/search",className:"nav-item",children:"Search songs"})}),Object(j.jsx)("li",{onClick:function(){return t()},children:Object(j.jsx)(m.b,{to:"/playlist-maker/view-playlists",className:"nav-item",children:"View playlists"})})]})})]})}),f=function(){return Object(j.jsx)("div",{className:"home",children:Object(j.jsx)("h2",{children:"I am home"})})},O=function(e){var t=e.type,n=e.name,a=e.onClick,c=e.className,s=e.id;return Object(j.jsx)("button",{id:s,type:t||"button",className:c,onClick:a,children:n})},y=function(e){var t=e.className,n=e.accessToken,c=e.expiresIn,s=e.playlists,r=e.viewPlaylists,i=e.handleSignIn,l=e.checkAccessToken;return Object(a.useEffect)((function(){document.title="View playlists | Chrisi Webster",l(),r()}),[]),Object(j.jsxs)("div",{className:t,children:[Object(j.jsx)("h2",{children:"PlaylistView"}),!n&&Object(j.jsx)(O,{type:"button",name:"Sign in",id:"sign",onClick:function(){return i()}}),0!==c&&Object(j.jsx)("div",{children:Object(j.jsx)("ul",{children:s.map((function(e){return Object(j.jsx)("li",{children:e.name},e.id)}))})})]})},v=(n(36),n(37),function(e){var t=e.track,n=e.remove,a=e.addTrack,c=e.removeTrack;return Object(j.jsxs)("div",{className:"tracks",children:[Object(j.jsxs)("div",{className:"flex-wrapper",children:[Object(j.jsx)("h3",{children:t.name})," ",n?Object(j.jsx)(O,{type:"submit",name:"-",onClick:function(){return c(t)}}):Object(j.jsx)(O,{type:"submit",name:"+",onClick:function(){return a(t)}})]}),Object(j.jsxs)("p",{children:[t.artist," | ",t.album]})]})}),k=function(e){var t=e.tracks,n=e.addTrack,a=e.removeTrack,c=e.remove;return Object(j.jsx)("div",{className:"track-list",children:t.map((function(e){return Object(j.jsx)(v,{track:e,addTrack:n,removeTrack:a,remove:c},e.id)}))})},x=function(e){var t=e.searchTracks,n=e.addTrack,a=e.message;return Object(j.jsx)("div",{className:"flex-wrapper",children:Object(j.jsxs)("div",{className:"tracks-wrapper",children:[t===[]&&{message:a},Object(j.jsx)(k,{tracks:t,addTrack:n,remove:!1})]})})},N=function(e){var t=e.type,n=e.label,a=e.placeholder,c=e.onChange,s=e.onBlur,r=e.id,i=e.value;return Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{htmlFor:r,children:n}),Object(j.jsx)("input",{id:r,type:t,value:i,placeholder:a,onChange:c,onBlur:s})]})},S=(n(38),function(e){var t=e.handleAPISearch,n=e.accessToken,c=e.expiresIn,s=e.handleSignIn,r=e.searchInput,i=e.handleSearchInput,l=e.handleClearSearchInput,o=e.checkAccessToken;return Object(a.useEffect)((function(){o()}),[]),Object(j.jsxs)("div",{className:"search-buttons",children:[!n&&Object(j.jsx)(O,{type:"button",name:"Sign in",id:"sign",onClick:function(e){return s(e)}}),0!==c&&Object(j.jsxs)("form",{id:"search",onSubmit:function(e){return t(e)},children:[Object(j.jsx)(N,{type:"text",value:r,id:"search",placeholder:"Search for songs",onChange:function(e){return i(e)},onBlur:function(){return l()}}),Object(j.jsx)(O,{type:"submit",name:"Search"})]})]})}),T=function(e){var t=e.updatePlaylistName,n=e.playlistTracks,a=e.savePlaylist,c=e.removeTrack,s=e.playlistName,r=e.setPlaylistTracks,i=e.setPlaylistName,l=e.handleClearNameInput,o=e.playlistInput;return Object(j.jsxs)("form",{id:"playlist-form",onSubmit:function(e){return function(e){e.preventDefault();var t=n.map((function(e){return e.uri}));a(s,t),i("New Playlist"),r([]),l()}(e)},children:[Object(j.jsx)(N,{type:"text",id:"playlist",value:o,onChange:function(e){return t(e)}}),Object(j.jsx)(k,{tracks:n,removeTrack:c,remove:!0}),Object(j.jsx)(O,{type:"submit",name:"Save to Spotify",id:"save-spotify"})]})},I=function(e){var t=e.expiresIn,n=e.accessToken,c=e.handleAPISearch,s=e.handleSignIn,r=e.searchInput,i=e.addTrack,l=e.handleSearchInput,o=e.handleClearSearchInput,u=e.searchTracks,h=e.updatePlaylistName,d=e.removeTrack,p=e.savePlaylist,m=e.setPlaylistName,b=e.playlistTracks,f=e.playlistName,O=e.playlistInput,y=e.setPlaylistTracks,v=e.handleClearNameInput,k=e.checkAccessToken;return Object(a.useEffect)((function(){document.title="Search | Chrisi Webster"})),Object(j.jsxs)("div",{children:[Object(j.jsx)(S,{handleAPISearch:c,accessToken:n,expiresIn:t,handleSearchInput:l,handleClearSearchInput:o,searchInput:r,handleSignIn:s,checkAccessToken:k}),0!==t&&Object(j.jsxs)("div",{className:"search-playlist-wrapper",children:[Object(j.jsxs)("div",{className:"search-results-wrapper",children:[Object(j.jsxs)("h2",{children:["Search results (",u.length,")"]}),Object(j.jsx)(x,{searchTracks:u,addTrack:i})]}),u&&Object(j.jsxs)("div",{className:"playlist-wrapper",children:[Object(j.jsx)("h2",{children:"Add to playlist"}),Object(j.jsx)(T,{updatePlaylistName:h,removeTrack:d,savePlaylist:p,setPlaylistName:m,playlistTracks:b,searchTracks:u,playlistName:f,playlistInput:O,setPlaylistTracks:y,handleClearNameInput:v})]})]})]})},g=(n(39),window.location.href),w=function(){var e=Object(a.useState)(!1),t=Object(h.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(),r=Object(h.a)(s,2),l=r[0],m=r[1],O=Object(a.useState)(""),v=Object(h.a)(O,2),k=v[0],x=v[1],N=Object(a.useState)(),S=Object(h.a)(N,2),T=S[0],w=S[1],P=Object(a.useState)([]),C=Object(h.a)(P,2),A=C[0],B=C[1],E=Object(a.useState)(""),_=Object(h.a)(E,2),z=_[0],J=_[1],D=Object(a.useState)([]),V=Object(h.a)(D,2),M=V[0],W=V[1],q=Object(a.useState)(""),F=Object(h.a)(q,2),G=F[0],H=F[1],K=Object(a.useState)("New Playlist"),L=Object(h.a)(K,2),Q=L[0],R=L[1],U=Object(a.useState)([]),X=Object(h.a)(U,2),Y=X[0],Z=X[1],$=function(){var e=Object(u.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.location.href.match(/access_token=([^&]*)/);case 2:return t=e.sent,e.next=5,window.location.href.match(/expires_in=([^&]*)/);case 5:n=e.sent,t&&n&&(x(t[1]),m(Number(n[1])),setInterval((function(){m((function(e){return e-1})),0===l&&m("")}),1e3));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(){window.location="https://accounts.spotify.com/authorize?client_id=".concat("54d03dd971f04b3e971ec3ffa241645c","&response_type=token&scope=").concat("playlist-read-private playlist-read-collaborative playlist-modify-public","&redirect_uri=").concat(g)};return Object(j.jsxs)("div",{children:[Object(j.jsx)(p,{title:"Playlist Maker",children:Object(j.jsx)(b,{handleNavClick:function(){c(!0!==n)},status:n})}),Object(j.jsxs)(d.c,{children:[Object(j.jsx)(d.a,{path:"/playlist-maker",exact:!0,children:Object(j.jsx)(f,{})}),Object(j.jsx)(d.a,{path:"/playlist-maker/search",exact:!0,children:Object(j.jsx)(I,{checkAccessToken:$,handleAPISearch:function(e){e.preventDefault(),fetch("https://api.spotify.com/v1/search?type=track&q=".concat(T,"?limit=50"),{headers:{Authorization:"Bearer ".concat(k)}}).then((function(e){return e.json()})).then((function(e){return e.tracks?(console.log(e),e.tracks.items.map((function(e){return{id:e.id,name:e.name,artist:e.artists[0].name,album:e.album.name,uri:e.uri}}))):[]})).then((function(e){B(e)}))},accessToken:k,expiresIn:l,handleSignIn:ee,searchInput:z,handleSearchInput:function(e){J(e.target.value),w(z)},handleClearSearchInput:function(){J("")},updatePlaylistName:function(e){R(e.target.value),H(Q)},removeTrack:function(e){var t=M.filter((function(t){return t.id!==e.id}));W(t)},savePlaylist:function(e,t){if(e&&t.length){var n={Authorization:"Bearer ".concat(k)};return fetch("https://api.spotify.com/v1/me",{headers:n}).then((function(e){return e.json()})).then((function(a){var c=a.id;return fetch("https://api.spotify.com/v1/users/".concat(c,"/playlists"),{headers:n,method:"POST",body:JSON.stringify({name:e})}).then((function(e){return e.json()})).then((function(e){console.log(e);var a=e.id;return fetch("https://api.spotify.com/v1/users/".concat(c,"/playlists/").concat(a,"/tracks"),{headers:n,method:"POST",body:JSON.stringify({uris:t})})}))}))}},setPlaylistName:H,playlistTracks:M,searchTracks:A,playlistName:G,playlistInput:Q,addTrack:function(e){M.find((function(e){return e.id===M.id}))||W((function(t){return[].concat(Object(i.a)(t),[e])}))},setPlaylistTracks:W,handleClearNameInput:function(){R("New Playlist")}})}),Object(j.jsx)(d.a,{path:"/playlist-maker/view-playlists",exact:!0,children:Object(j.jsx)(y,{checkAccessToken:$,accessToken:k,expiresIn:l,viewPlaylists:function(){var e={Authorization:"Bearer ".concat(k)};return fetch("https://api.spotify.com/v1/me",{headers:e}).then((function(e){return e.json()})).then((function(t){var n=t.id;return fetch("https://api.spotify.com/v1/users/".concat(n,"/playlists?limit=50"),{headers:e,method:"GET"}).then((function(e){return e.json()})).then((function(e){return e.items?(console.log(e.items),e.items.map((function(e){return{id:e.id,name:e.name}}))):[]})).then((function(e){Z(e)}))}))},setPlaylists:Z,playlists:Y,handleSignIn:ee})})]})]})};r.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(m.a,{basename:"/",children:Object(j.jsx)(w,{})})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.22d33ce2.chunk.js.map