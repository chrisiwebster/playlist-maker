(this["webpackJsonpplaylist-maker"]=this["webpackJsonpplaylist-maker"]||[]).push([[0],{25:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),s=a(18),r=a.n(s),i=a(20),l=a(7),o=a(2),u=a(8),h=(a(25),a(0)),d=function(e){var t=e.type,a=e.name,n=e.onClick,c=e.className,s=e.id;return Object(h.jsx)("button",{id:s,type:t||"button",className:c,onClick:n,children:a})},j=function(e){var t=e.handleNavClick,a=e.status,n=e.expiresIn,c=e.accessToken,s=e.handleSignIn;return Object(h.jsxs)("div",{className:"nav-wrapper",children:[""===c&&Object(h.jsx)(u.b,{to:"/",children:Object(h.jsx)(d,{type:"button",name:"Sign in",onClick:function(){return s()}})}),void 0!==n&&Object(h.jsxs)("div",{className:"nav-wrapper",children:[Object(h.jsx)("i",{tabIndex:"0",onKeyDown:function(){return t()},onClick:function(){return t()},className:!0===a?"fas fa-times":"fas fa-hamburger"}),Object(h.jsx)("nav",{children:Object(h.jsxs)("ul",{className:a?"navigation active":"navigation",role:"navigation",children:[Object(h.jsx)("li",{onClick:function(){return t()},children:Object(h.jsx)(u.c,{to:"/",className:"nav-item",children:"Home"})}),Object(h.jsx)("li",{onClick:function(){return t()},children:Object(h.jsx)(u.c,{to:"/search",className:"nav-item",children:"Search songs"})}),Object(h.jsx)("li",{onClick:function(){return t()},children:Object(h.jsx)(u.c,{to:"/view-playlists",className:"nav-item",children:"View playlists"})})]})})]})]})},p=(a(32),a.p+"static/media/singing_microphone_boy.851c2684.png"),b=(a(33),function(e){var t=e.title;return Object(h.jsxs)("header",{children:[Object(h.jsx)("h1",{children:t}),Object(h.jsx)("img",{src:p,alt:"Boy singing into microphone",title:"Decorative image"})]})}),m=function(e){var t=e.accessToken,a=e.expiresIn;return Object(h.jsxs)("div",{className:"home",children:[Object(h.jsx)(b,{title:"Playlist Maker"}),Object(h.jsx)("h2",{children:"I am home"}),""===t&&"sign in",void 0!==a&&Object(h.jsx)("p",{children:"You're good to go"})]})},f=function(e){var t=e.className,a=e.playlists,c=e.viewPlaylists;return Object(n.useEffect)((function(){document.title="View playlists | Chrisi Webster",c()}),[c]),Object(h.jsxs)("div",{className:t,children:[Object(h.jsx)("h2",{children:"View your playlists"}),Object(h.jsx)("ul",{children:a.map((function(e){return Object(h.jsx)("div",{children:e.name},e.id)}))})]})},O=(a(34),a(35),function(e){var t=e.track,a=e.remove,n=e.addTrack,c=e.removeTrack;return Object(h.jsxs)("div",{className:"tracks",children:[Object(h.jsxs)("div",{className:"flex-wrapper",children:[Object(h.jsx)("h3",{children:t.name})," ",a?Object(h.jsx)(d,{type:"submit",name:"-",onClick:function(){return c(t)}}):Object(h.jsx)(d,{type:"submit",name:"+",onClick:function(){return n(t)}})]}),Object(h.jsxs)("p",{children:[t.artist," | ",t.album]})]})}),v=function(e){var t=e.tracks,a=e.addTrack,n=e.removeTrack,c=e.remove;return Object(h.jsx)("div",{className:"track-list",children:t.map((function(e){return Object(h.jsx)(O,{track:e,addTrack:a,removeTrack:n,remove:c},e.id)}))})},y=function(e){var t=e.searchTracks,a=e.addTrack;return Object(h.jsx)("div",{className:"flex-wrapper",children:Object(h.jsx)("div",{className:"tracks-wrapper",children:Object(h.jsx)(v,{tracks:t,addTrack:a,remove:!1})})})},x=function(e){var t=e.type,a=e.label,n=e.placeholder,c=e.onChange,s=e.onBlur,r=e.id,i=e.value;return Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:r,children:a}),Object(h.jsx)("input",{id:r,type:t,value:i,placeholder:n,onChange:c,onBlur:s})]})},k=(a(36),function(e){var t=e.handleAPISearch,a=e.searchInput,n=e.handleSearchInput,c=e.handleClearSearchInput;return Object(h.jsx)("div",{className:"search-buttons",children:Object(h.jsxs)("form",{id:"search",onSubmit:function(e){return t(e)},children:[Object(h.jsx)(x,{type:"text",value:a,id:"search",placeholder:"Search for songs",onChange:function(e){return n(e)},onBlur:function(){return c()}}),Object(h.jsx)(d,{type:"submit",name:"Search"})]})})}),N=function(e){var t=e.updatePlaylistName,a=e.playlistTracks,n=e.savePlaylist,c=e.removeTrack,s=e.playlistName,r=e.setPlaylistTracks,i=e.setPlaylistName,l=e.handleClearNameInput,o=e.playlistInput;return Object(h.jsxs)("form",{id:"playlist-form",onSubmit:function(e){return function(e){e.preventDefault();var t=a.map((function(e){return e.uri}));n(s,t),i("New Playlist"),r([]),l()}(e)},children:[Object(h.jsx)(x,{type:"text",id:"playlist",value:o,onChange:function(e){return t(e)}}),Object(h.jsx)(v,{tracks:a,removeTrack:c,remove:!0}),Object(h.jsx)(d,{type:"submit",name:"Save to Spotify",id:"save-spotify"})]})},S=function(e){e.expiresIn,e.accessToken;var t=e.handleAPISearch,a=e.searchInput,c=e.addTrack,s=e.handleSearchInput,r=e.handleClearSearchInput,i=e.searchTracks,l=e.updatePlaylistName,o=e.removeTrack,u=e.savePlaylist,d=e.setPlaylistName,j=e.playlistTracks,p=e.playlistName,b=e.playlistInput,m=e.setPlaylistTracks,f=e.handleClearNameInput;return Object(n.useEffect)((function(){document.title="Search | Chrisi Webster"})),Object(h.jsxs)("div",{children:[Object(h.jsx)(k,{handleAPISearch:t,handleSearchInput:s,handleClearSearchInput:r,searchInput:a}),Object(h.jsxs)("div",{className:"search-playlist-wrapper",children:[Object(h.jsxs)("div",{className:"search-results-wrapper",children:[Object(h.jsxs)("h2",{children:["Search results (",i.length,")"]}),Object(h.jsx)(y,{searchTracks:i,addTrack:c})]}),i&&Object(h.jsxs)("div",{className:"playlist-wrapper",children:[Object(h.jsx)("h2",{children:"Add to playlist"}),Object(h.jsx)(N,{updatePlaylistName:l,removeTrack:o,savePlaylist:u,setPlaylistName:d,playlistTracks:j,searchTracks:i,playlistName:p,playlistInput:b,setPlaylistTracks:m,handleClearNameInput:f})]})]})]})},T=(a(37),function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(),r=Object(l.a)(s,2),u=r[0],d=r[1],p=Object(n.useState)(""),b=Object(l.a)(p,2),O=b[0],v=b[1],y=Object(n.useState)(),x=Object(l.a)(y,2),k=x[0],N=x[1],T=Object(n.useState)([]),I=Object(l.a)(T,2),g=I[0],w=I[1],P=Object(n.useState)(""),C=Object(l.a)(P,2),A=C[0],B=C[1],_=Object(n.useState)([]),E=Object(l.a)(_,2),z=E[0],D=E[1],J=Object(n.useState)(""),V=Object(l.a)(J,2),M=V[0],W=V[1],q=Object(n.useState)("New Playlist"),F=Object(l.a)(q,2),G=F[0],H=F[1],K=Object(n.useState)([]),Y=Object(l.a)(K,2),L=Y[0],Q=Y[1],R=Object(n.useCallback)((function(){var e=window.location.href.match(/access_token=([^&]*)/),t=window.location.href.match(/expires_in=([^&]*)/);e&&t&&(v(e[1]),d(Number(t[1])),setInterval((function(){d((function(e){return e-1})),0===u&&d("")}),1e3))}),[u]),U=function(){window.location="https://accounts.spotify.com/authorize?client_id=".concat("54d03dd971f04b3e971ec3ffa241645c","&response_type=token&scope=").concat("playlist-read-private playlist-read-collaborative playlist-modify-public","&redirect_uri=").concat("https://chrisiwebster.github.io/playlist-maker")},X=Object(n.useCallback)((function(){var e={Authorization:"Bearer ".concat(O)};if(window.location)return fetch("https://api.spotify.com/v1/me",{headers:e}).then((function(e){return e.json()})).then((function(t){var a=t.id;return fetch("https://api.spotify.com/v1/users/".concat(a,"/playlists?limit=50"),{headers:e,method:"GET"}).then((function(e){return e.json()})).then((function(e){return e.items?e.items.map((function(e){return{id:e.id,name:e.name}})):[]})).then((function(e){Q(e)}))}))}),[O]);return Object(n.useEffect)((function(){R()})),Object(h.jsxs)("div",{children:[Object(h.jsx)(j,{handleNavClick:function(){c(!0!==a)},status:a,expiresIn:u,accessToken:O,handleSignIn:U}),Object(h.jsxs)(o.c,{children:[Object(h.jsx)(o.a,{exact:!0,path:"/",children:Object(h.jsx)(m,{checkAccessToken:R,accessToken:O,expiresIn:u})}),Object(h.jsx)(o.a,{path:"/search",children:Object(h.jsx)(S,{handleAPISearch:function(e){e.preventDefault(),fetch("https://api.spotify.com/v1/search?type=track&q=".concat(k,"&limit=50"),{headers:{Authorization:"Bearer ".concat(O)}}).then((function(e){return e.json()})).then((function(e){return e.tracks?e.tracks.items.map((function(e){return{id:e.id,name:e.name,artist:e.artists[0].name,album:e.album.name,uri:e.uri}})):[]})).then((function(e){w(e)}))},searchInput:A,handleSearchInput:function(e){B(e.target.value),N(A)},handleClearSearchInput:function(){B("")},updatePlaylistName:function(e){H(e.target.value),W(G)},removeTrack:function(e){var t=z.filter((function(t){return t.id!==e.id}));D(t)},savePlaylist:function(e,t){if(e&&t.length){var a={Authorization:"Bearer ".concat(O)};return fetch("https://api.spotify.com/v1/me",{headers:a}).then((function(e){return e.json()})).then((function(n){var c=n.id;return fetch("https://api.spotify.com/v1/users/".concat(c,"/playlists"),{headers:a,method:"POST",body:JSON.stringify({name:e})}).then((function(e){return e.json()})).then((function(e){var n=e.id;return fetch("https://api.spotify.com/v1/users/".concat(c,"/playlists/").concat(n,"/tracks"),{headers:a,method:"POST",body:JSON.stringify({uris:t})})}))}))}},setPlaylistName:W,playlistTracks:z,searchTracks:g,playlistName:M,playlistInput:G,addTrack:function(e){z.find((function(e){return e.id===z.id}))||D((function(t){return[].concat(Object(i.a)(t),[e])}))},setPlaylistTracks:D,handleClearNameInput:function(){H("New Playlist")}})}),Object(h.jsx)(o.a,{exact:!0,path:"/view-playlists",children:Object(h.jsx)(f,{viewPlaylists:X,setPlaylists:Q,playlists:L,handleSignIn:U})})]})]})});r.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(u.a,{basename:"/playlist-maker",children:Object(h.jsx)(T,{})})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.471f0138.chunk.js.map