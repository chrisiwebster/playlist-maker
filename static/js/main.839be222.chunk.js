(this["webpackJsonpplaylist-maker"]=this["webpackJsonpplaylist-maker"]||[]).push([[0],{25:function(e,t,n){},27:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var c,a=n(1),s=n(18),r=n.n(s),i=n(7),l=n(8),o=n(2),u=(n(25),n(0)),h=function(e){var t=e.title,n=e.children;return Object(u.jsxs)("header",{children:[n,Object(u.jsx)("h1",{children:t})]})},j=(n(27),function(e){var t=e.handleNavClick,n=e.status;return Object(u.jsxs)("div",{className:"nav-wrapper",children:[Object(u.jsx)("i",{tabIndex:"0",onKeyDown:function(){return t()},onClick:function(){return t()},className:!0===n?"fas fa-times":"fas fa-hamburger"}),Object(u.jsx)("nav",{children:Object(u.jsx)(l.a,{children:Object(u.jsxs)("ul",{className:n?"navigation active":"navigation",role:"navigation",children:[Object(u.jsx)("li",{onClick:function(){return t()},children:Object(u.jsx)(l.b,{to:"/",className:"nav-item",children:"Home"})}),Object(u.jsx)("li",{onClick:function(){return t()},children:Object(u.jsx)(l.b,{to:"/search",className:"nav-item",children:"Search songs"})}),Object(u.jsx)("li",{onClick:function(){return t()},children:Object(u.jsx)(l.b,{to:"/view-playlists",className:"nav-item",children:"View playlists"})})]})})})]})}),d=function(){return Object(u.jsx)("div",{className:"home",children:Object(u.jsx)("h2",{children:"I am home"})})},p=function(e){var t=e.type,n=e.name,c=e.onClick,a=e.className,s=e.id;return Object(u.jsx)("button",{id:s,type:t||"button",className:a,onClick:c,children:n})},b=function(e){var t=e.className,n=e.accessToken,c=(e.expiresIn,Object(a.useState)([])),s=Object(i.a)(c,2),r=(s[0],s[1]);return Object(a.useEffect)((function(){document.title="View playlists | Chrisi Webster"})),Object(u.jsxs)("div",{className:t,children:[Object(u.jsx)("h2",{children:"PlaylistView"}),Object(u.jsx)(p,{name:"View playlists",onClick:function(){return function(){var e={Authorization:"Bearer ".concat(n)};return fetch("https://api.spotify.com/v1/me",{headers:e}).then((function(e){return e.json()})).then((function(t){var n=t.id;return fetch("https://api.spotify.com/v1/users/".concat(n,"/playlists?limit=50"),{headers:e,method:"GET"}).then((function(e){return e.json()})).then((function(e){console.log(e),r(e)}))}))}()}})]})},f=n(20),m=(n(33),n(34),function(e){var t=e.track,n=e.remove,c=e.addTrack,a=e.removeTrack;return Object(u.jsxs)("div",{className:"tracks",children:[Object(u.jsxs)("div",{className:"flex-wrapper",children:[Object(u.jsx)("h3",{children:t.name})," ",n?Object(u.jsx)(p,{type:"submit",name:"-",onClick:function(){return a(t)}}):Object(u.jsx)(p,{type:"submit",name:"+",onClick:function(){return c(t)}})]}),Object(u.jsxs)("p",{children:[t.artist," | ",t.album]})]})}),O=function(e){var t=e.tracks,n=e.addTrack,c=e.removeTrack,a=e.remove;return Object(u.jsx)("div",{className:"track-list",children:t.map((function(e){return Object(u.jsx)(m,{track:e,addTrack:n,removeTrack:c,remove:a},e.id)}))})},v=function(e){var t=e.searchTracks,n=e.addTrack,c=e.message;return Object(u.jsx)("div",{className:"flex-wrapper",children:Object(u.jsxs)("div",{className:"tracks-wrapper",children:[t===[]&&{message:c},Object(u.jsx)(O,{tracks:t,addTrack:n,remove:!1})]})})},x=function(e){var t=e.type,n=e.label,c=e.placeholder,a=e.onChange,s=e.onBlur,r=e.id,i=e.value;return Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:r,children:n}),Object(u.jsx)("input",{id:r,type:t,value:i,placeholder:c,onChange:a,onBlur:s})]})},y=(n(35),function(e){var t=e.handleAPISearch,n=e.accessToken,c=e.expiresIn,a=e.handleSignIn,s=e.searchInput,r=e.handleSearchInput,i=e.handleClearSearchInput;return Object(u.jsxs)("div",{className:"search-buttons",children:[!n&&Object(u.jsx)(p,{type:"button",name:"Sign in",id:"sign",onClick:function(){return a()}}),0!==c&&Object(u.jsxs)("form",{id:"search",onSubmit:function(e){return t(e)},children:[Object(u.jsx)(x,{type:"text",value:s,id:"search",placeholder:"Search for songs",onChange:function(e){return r(e)},onBlur:function(){return i()}}),Object(u.jsx)(p,{type:"submit",name:"Search"})]})]})}),k=function(e){var t=e.updatePlaylistName,n=e.playlistTracks,c=e.savePlaylist,a=e.removeTrack,s=e.playlistName,r=e.setPlaylistTracks,i=e.setPlaylistName,l=e.handleClearNameInput,o=e.playlistInput;return Object(u.jsxs)("form",{id:"playlist-form",onSubmit:function(e){return function(e){e.preventDefault();var t=n.map((function(e){return e.uri}));c(s,t),i("New Playlist"),r([])}(e)},children:[Object(u.jsx)(x,{type:"text",id:"playlist",value:o,onChange:function(e){return t(e)},onBlur:function(){return l()}}),Object(u.jsx)(O,{tracks:n,removeTrack:a,remove:!0}),Object(u.jsx)(p,{type:"submit",name:"Save to Spotify",id:"save-spotify"})]})},N=0,w=window.location.href.match(/access_token=([^&]*)/),S=window.location.href.match(/expires_in=([^&]*)/);w&&S&&(c=w[1],N=Number(S[1]),window.location.href="https://chrisiwebster.github.com/edit-playlist/#/search",setInterval((function(){0===--N&&(c="",document.location.reload())}),1e3));var g=function(){var e=Object(a.useState)(),t=Object(i.a)(e,2),n=t[0],s=t[1],r=Object(a.useState)([]),l=Object(i.a)(r,2),o=l[0],h=l[1],j=Object(a.useState)(""),d=Object(i.a)(j,2),p=d[0],m=d[1],O=Object(a.useState)([]),x=Object(i.a)(O,2),w=x[0],S=x[1],g=Object(a.useState)("New Playlist"),T=Object(i.a)(g,2),I=T[0],C=T[1],P=Object(a.useState)("New Playlist"),B=Object(i.a)(P,2),A=B[0],_=B[1];return Object(a.useEffect)((function(){})),Object(u.jsxs)("div",{children:[Object(u.jsx)(y,{handleAPISearch:function(e){e.preventDefault(),fetch("https://api.spotify.com/v1/search?type=track&q=".concat(n),{headers:{Authorization:"Bearer ".concat(c)}}).then((function(e){return e.json()})).then((function(e){return e.tracks?(console.log(e),e.tracks.items.map((function(e){return{id:e.id,name:e.name,artist:e.artists[0].name,album:e.album.name,uri:e.uri}}))):[]})).then((function(e){h(e)}))},accessToken:c,expiresIn:N,handleSearchInput:function(e){m(e.target.value),s(p)},handleClearSearchInput:function(){m("")},searchInput:p,handleSignIn:function(){window.location="https://accounts.spotify.com/authorize?client_id=".concat("54d03dd971f04b3e971ec3ffa241645c","&response_type=token&scope=playlist-modify-public%20playlist-read-private%20playlist-read-collaborative&redirect_uri=").concat("http://localhost:3000/")}}),0!==N&&Object(u.jsxs)("div",{className:"search-playlist-wrapper",children:[Object(u.jsxs)("div",{class:"search-results-wrapper",children:[Object(u.jsxs)("h2",{children:["Search results (",o.length,")"]}),Object(u.jsx)(v,{searchTracks:o,addTrack:function(e){w.find((function(e){return e.id===w.id}))||S((function(t){return[].concat(Object(f.a)(t),[e])}))}})]}),o&&Object(u.jsxs)("div",{className:"playlist-wrapper",children:[Object(u.jsx)("h2",{children:"Add to playlist"}),Object(u.jsx)(k,{updatePlaylistName:function(e){_(e.target.value),C(A)},removeTrack:function(e){var t=w.filter((function(t){return t.id!==e.id}));S(t)},savePlaylist:function(e,t){if(e&&t.length){var n={Authorization:"Bearer ".concat(c)};return fetch("https://api.spotify.com/v1/me",{headers:n}).then((function(e){return e.json()})).then((function(c){var a=c.id;return fetch("https://api.spotify.com/v1/users/".concat(a,"/playlists?limit=50"),{headers:n,method:"POST",body:JSON.stringify({name:e})}).then((function(e){return e.json()})).then((function(e){console.log(e);var c=e.id;return fetch("https://api.spotify.com/v1/users/".concat(a,"/playlists/").concat(c,"/tracks"),{headers:n,method:"POST",body:JSON.stringify({uris:t})})}))}))}},setPlaylistName:C,playlistTracks:w,searchTracks:o,playlistName:I,playlistInput:A,setPlaylistTracks:S,handleClearNameInput:function(){_("New Playlist")}})]})]}),Object(u.jsx)(b,{className:"hidden",expiresIn:N,accessToken:c})]})},T=(n(36),function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(u.jsxs)("div",{children:[Object(u.jsx)(h,{title:"Playlist Maker",children:Object(u.jsx)(j,{handleNavClick:function(){c(!0!==n)},status:n})}),Object(u.jsx)(l.a,{basename:"/",children:Object(u.jsxs)(o.c,{children:[Object(u.jsx)(o.a,{exact:!0,path:"/",component:d}),Object(u.jsx)(o.a,{exact:!0,path:"/search",component:g}),Object(u.jsx)(o.a,{exact:!0,path:"/view-playlists",component:b})]})})]})});r.a.render(Object(u.jsx)(T,{}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.839be222.chunk.js.map