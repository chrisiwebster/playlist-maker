(this["webpackJsonpplaylist-maker"]=this["webpackJsonpplaylist-maker"]||[]).push([[0],{25:function(e,t,a){},26:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),c=a(18),r=a.n(c),s=a(20),l=a(7),o=a(2),u=a(8),d=(a(25),a(26),a(0)),j=function(e){var t=e.type,a=e.name,n=e.onClick,i=e.className,c=e.id;return Object(d.jsx)("button",{id:c,type:t||"button",className:i,onClick:n,children:a})},h=function(e){var t=e.handleNavClick,a=e.status,n=e.expiresIn,i=e.accessToken,c=e.handleSignIn;return Object(d.jsxs)("div",{id:"nav",children:[""===i&&Object(d.jsx)(u.b,{to:"/",children:Object(d.jsx)(j,{type:"button",name:"Sign in",className:"btn-primary",onClick:function(){return c()}})}),void 0!==n&&Object(d.jsxs)("nav",{children:[Object(d.jsx)("i",{tabIndex:"0",onKeyDown:function(){return t()},onClick:function(){return t()},className:!0===a?"fas fa-times":"fas fa-hamburger"}),Object(d.jsxs)("ul",{className:a?"navigation active":"navigation",role:"navigation",children:[Object(d.jsx)("li",{onClick:function(){return t()},children:Object(d.jsx)(u.c,{to:"/",className:"nav-item",children:"Home"})}),Object(d.jsx)("li",{onClick:function(){return t()},children:Object(d.jsx)(u.c,{to:"/about",className:"nav-item",children:"About"})}),Object(d.jsx)("li",{onClick:function(){return t()},children:Object(d.jsx)(u.c,{to:"/search",className:"nav-item",children:"Search songs"})}),Object(d.jsx)("li",{onClick:function(){return t()},children:Object(d.jsx)(u.c,{to:"/view-playlists",className:"nav-item",children:"View playlists"})})]})]})]})},p=a.p+"static/media/colour_radio.4ca86dda.png",m=a.p+"static/media/singing_microphone_boy.24711902.png",b=(a(33),function(e){var t=e.title;return Object(d.jsxs)("header",{children:[Object(d.jsx)("h1",{children:t}),Object(d.jsx)("img",{src:m,alt:"Boy singing into microphone",title:"Decorative image"})]})}),f=(a(34),function(e){var t=e.errorMessage;return Object(d.jsxs)("div",{className:"warning-box",children:[Object(d.jsx)("div",{className:"warning-icon",children:Object(d.jsx)("i",{className:"fas fa-exclamation-triangle"})}),Object(d.jsx)("div",{className:"warning-text",children:Object(d.jsx)("p",{children:t})})]})}),O=function(e){var t=e.accessToken,a=e.expiresIn;return Object(d.jsxs)("div",{id:"home",children:[Object(d.jsx)(b,{title:"Playlist Maker"}),""===t&&Object(d.jsx)(f,{errorMessage:"Sign into Spotify to navigate to the rest of the site."}),void 0!==a&&Object(d.jsxs)("section",{children:[Object(d.jsxs)("div",{className:"content-wrapper",children:[Object(d.jsx)("h2",{children:"Use the Spotify API"}),Object(d.jsx)("p",{children:"Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."})]}),Object(d.jsx)("img",{id:"colour-radio",src:p,alt:"Decorative",title:"Colourful radio"})]})]})},v=a.p+"static/media/tape_headphones.a1503ef3.png",x=function(){return Object(d.jsxs)("div",{id:"about",children:[Object(d.jsx)(b,{title:"About"}),Object(d.jsxs)("section",{children:[Object(d.jsxs)("div",{className:"content-wrapper",children:[Object(d.jsx)("p",{children:"Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."}),Object(d.jsx)("p",{children:"Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."})]}),Object(d.jsx)("img",{id:"tape",src:v,alt:"Tape and headphones",title:"Decorative image"})]})]})},y=(a(35),function(e){var t=e.playlists,a=e.viewPlaylists,i=e.errorMessage;return Object(n.useEffect)((function(){document.title="View playlists | Chrisi Webster",a()}),[]),Object(d.jsxs)("div",{id:"playlist",children:[Object(d.jsx)(b,{title:"View your playlists"}),""!==i&&Object(d.jsx)(f,{errorMessage:i}),Object(d.jsx)("section",{children:t.map((function(e){return Object(d.jsx)("div",{className:"playlist-wrapper",children:Object(d.jsx)("h3",{children:e.name})},e.id)}))})]})}),k=(a(36),a(37),function(e){var t=e.track,a=e.remove,n=e.addTrack,i=e.removeTrack;return Object(d.jsxs)("div",{className:"tracks",children:[Object(d.jsxs)("p",{children:[t.name," | ",t.artist,Object(d.jsx)("br",{}),t.album]}),a?Object(d.jsx)(j,{type:"submit",name:"-",className:"btn-secondary",onClick:function(){return i(t)}}):Object(d.jsx)(j,{type:"submit",name:"+",className:"btn-secondary",onClick:function(){return n(t)}})]})}),g=function(e){var t=e.tracks,a=e.addTrack,n=e.removeTrack,i=e.remove;return Object(d.jsx)("div",{className:"track-list",children:t&&t.map((function(e){return Object(d.jsx)(k,{track:e,addTrack:a,removeTrack:n,remove:i},e.id+"1")}))})},N=function(e){var t=e.searchTracks,a=e.addTrack;return Object(d.jsx)("div",{children:Object(d.jsx)(g,{tracks:t,addTrack:a,remove:!1})})},S=(a(38),function(e){var t=e.type,a=e.label,n=e.placeholder,i=e.onChange,c=e.onBlur,r=e.id,s=e.value;return Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{htmlFor:r,children:a}),Object(d.jsx)("input",{id:r,type:t,value:s,placeholder:n,onChange:i,onBlur:c})]})}),T=(a(39),function(e){var t=e.handleAPISearch,a=e.searchInput,n=e.handleSearchInput,i=e.handleClearSearchInput;return Object(d.jsxs)("form",{id:"search",onSubmit:function(e){return t(e)},children:[Object(d.jsx)(S,{type:"text",value:a,id:"search",placeholder:"Search for songs",onChange:function(e){return n(e)},onBlur:function(){return i()}}),Object(d.jsx)(j,{type:"submit",name:"Search",className:"btn-primary"})]})}),I=function(e){var t=e.updatePlaylistName,a=e.playlistTracks,n=e.savePlaylist,i=e.removeTrack,c=e.playlistName,r=e.setPlaylistTracks,s=e.setPlaylistName,l=e.handleClearNameInput,o=e.playlistInput;return Object(d.jsxs)("div",{id:"playlist",children:[Object(d.jsxs)("form",{id:"playlist-form",onSubmit:function(e){return function(e){e.preventDefault();var t=a.map((function(e){return e.uri}));n(c,t),s("New Playlist"),r([]),l()}(e)},children:[Object(d.jsx)(S,{type:"text",id:"playlist",value:o,onChange:function(e){return t(e)}}),Object(d.jsx)(j,{type:"submit",name:"Save",id:"save-spotify",className:"btn-primary"})]}),Object(d.jsx)("div",{children:Object(d.jsx)(g,{tracks:a,removeTrack:i,remove:!0})})]})},P=function(e){var t=e.errorMessage,a=e.handleAPISearch,i=e.searchInput,c=e.addTrack,r=e.handleSearchInput,s=e.handleClearSearchInput,l=e.searchTracks,o=e.updatePlaylistName,u=e.removeTrack,j=e.savePlaylist,h=e.setPlaylistName,p=e.playlistTracks,m=e.playlistName,O=e.playlistInput,v=e.setPlaylistTracks,x=e.handleClearNameInput;return Object(n.useEffect)((function(){document.title="Search | Chrisi Webster"})),Object(d.jsxs)("div",{id:"search-results",children:[Object(d.jsx)(b,{title:"Search for songs"}),t&&Object(d.jsx)(f,{errorMessage:t}),Object(d.jsx)(T,{handleAPISearch:a,handleSearchInput:r,handleClearSearchInput:s,searchInput:i,errorMessage:t}),Object(d.jsxs)("div",{children:[Object(d.jsxs)("h2",{children:["Search results (",l&&l.length,")"]}),Object(d.jsx)(N,{searchTracks:l,addTrack:c}),Object(d.jsx)("h2",{children:"Add to playlist"}),Object(d.jsx)(I,{updatePlaylistName:o,removeTrack:u,savePlaylist:j,setPlaylistName:h,playlistTracks:p,searchTracks:l,playlistName:m,playlistInput:O,setPlaylistTracks:v,handleClearNameInput:x})]})]})},w=(a(40),function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],i=t[1],c=Object(n.useState)(),r=Object(l.a)(c,2),u=r[0],j=r[1],p=Object(n.useState)(""),m=Object(l.a)(p,2),b=m[0],f=m[1],v=Object(n.useState)(),k=Object(l.a)(v,2),g=k[0],N=k[1],S=Object(n.useState)([]),T=Object(l.a)(S,2),I=T[0],w=T[1],C=Object(n.useState)(""),q=Object(l.a)(C,2),A=q[0],M=q[1],D=Object(n.useState)([]),_=Object(l.a)(D,2),B=_[0],E=_[1],z=Object(n.useState)(""),J=Object(l.a)(z,2),U=J[0],V=J[1],W=Object(n.useState)("New Playlist"),Y=Object(l.a)(W,2),F=Y[0],G=Y[1],H=Object(n.useState)([]),K=Object(l.a)(H,2),L=K[0],Q=K[1],R=Object(n.useState)(""),X=Object(l.a)(R,2),Z=X[0],$=X[1],ee=function(){var e=window.location.href.match(/access_token=([^&]*)/),t=window.location.href.match(/expires_in=([^&]*)/);e&&t&&(f(e[1]),j(Number(t[1])),setInterval((function(){j((function(e){return e-1})),0===u&&j("")}),1e3))};return Object(n.useEffect)((function(){ee()}),[]),Object(d.jsxs)("div",{id:"app-wrapper",children:[Object(d.jsx)(h,{handleNavClick:function(){i(!0!==a)},status:a,expiresIn:u,accessToken:b,handleSignIn:function(){window.location="https://accounts.spotify.com/authorize?client_id=".concat("54d03dd971f04b3e971ec3ffa241645c","&response_type=token&scope=").concat("playlist-read-private playlist-read-collaborative playlist-modify-public","&redirect_uri=").concat("https://chrisiwebster.github.io/playlist-maker")}}),Object(d.jsxs)(o.c,{children:[Object(d.jsx)(o.a,{exact:!0,path:"/",children:Object(d.jsx)(O,{checkAccessToken:ee,accessToken:b,expiresIn:u})}),Object(d.jsx)(o.a,{exact:!0,path:"/about",children:Object(d.jsx)(x,{})}),Object(d.jsx)(o.a,{path:"/search",children:Object(d.jsx)(P,{handleAPISearch:function(e){e.preventDefault(),void 0!==u?fetch("https://api.spotify.com/v1/search?type=track&q=".concat(g,"&limit=50"),{headers:{Authorization:"Bearer ".concat(b)}}).then((function(e){return e.json()})).then((function(e){return 0===e.tracks.total?(M(""),$("No tracks matched that search term. Try again!")):e.tracks.items.map((function(e){return{id:e.id,name:e.name,artist:e.artists[0].name,album:e.album.name,uri:e.uri}}))})).then((function(e){w(e)})):$("You need to sign in")},searchInput:A,handleSearchInput:function(e){M(e.target.value),N(A)},handleClearSearchInput:function(){M("")},updatePlaylistName:function(e){G(e.target.value),V(F)},removeTrack:function(e){var t=B.filter((function(t){return t.id!==e.id}));E(t)},savePlaylist:function(e,t){if(e&&t.length){var a={Authorization:"Bearer ".concat(b)};return fetch("https://api.spotify.com/v1/me",{headers:a}).then((function(e){return e.json()})).then((function(n){var i=n.id;return fetch("https://api.spotify.com/v1/users/".concat(i,"/playlists"),{headers:a,method:"POST",body:JSON.stringify({name:e})}).then((function(e){return e.json()})).then((function(e){var n=e.id;return fetch("https://api.spotify.com/v1/users/".concat(i,"/playlists/").concat(n,"/tracks"),{headers:a,method:"POST",body:JSON.stringify({uris:t})})}))}))}},setPlaylistName:V,playlistTracks:B,searchTracks:I,playlistName:U,playlistInput:F,addTrack:function(e){for(var t=0;t<B.length;t++)if(e.id===B[t].id)return;E((function(t){return[].concat(Object(s.a)(t),[e])}))},setPlaylistTracks:E,handleClearNameInput:function(){G("New Playlist")},errorMessage:Z})}),Object(d.jsx)(o.a,{exact:!0,path:"/view-playlists",children:Object(d.jsx)(y,{viewPlaylists:function(){var e={Authorization:"Bearer ".concat(b)};if(void 0!==u)return fetch("https://api.spotify.com/v1/me",{headers:e}).then((function(e){return e.json()})).then((function(t){var a=t.id;return fetch("https://api.spotify.com/v1/users/".concat(a,"/playlists?limit=50"),{headers:e,method:"GET"}).then((function(e){return e.json()})).then((function(e){return e.items?e.items.map((function(e){return{id:e.id,name:e.name,href:e.href,images:e.images}})):[]})).then((function(e){Q(e)}))}));$("You need to sign in")},setPlaylists:Q,playlists:L,errorMessage:Z})})]})]})});r.a.render(Object(d.jsx)(i.a.StrictMode,{children:Object(d.jsx)(u.a,{basename:"/playlist-maker",children:Object(d.jsx)(w,{})})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.87db2062.chunk.js.map