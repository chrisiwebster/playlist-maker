(this["webpackJsonpplaylist-maker"]=this["webpackJsonpplaylist-maker"]||[]).push([[0],{26:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),s=n(18),r=n.n(s),i=n(20),l=n(7),o=n(2),u=n(0),h=function(e){var t=e.title,n=e.children;return Object(u.jsxs)("header",{children:[n,Object(u.jsx)("h1",{children:t})]})},d=n(8),j=(n(26),function(e){var t=e.type,n=e.name,a=e.onClick,c=e.className,s=e.id;return Object(u.jsx)("button",{id:s,type:t||"button",className:c,onClick:a,children:n})}),p=function(e){var t=e.handleNavClick,n=e.status,a=e.expiresIn,c=e.accessToken,s=e.handleSignIn;return Object(u.jsxs)("div",{className:"nav-wrapper",children:[""===c&&Object(u.jsx)(d.b,{to:"/",children:Object(u.jsx)(j,{type:"button",name:"Sign in",onClick:function(){return s()}})}),void 0!==a&&Object(u.jsxs)("div",{className:"nav-wrapper",children:[Object(u.jsx)("i",{tabIndex:"0",onKeyDown:function(){return t()},onClick:function(){return t()},className:!0===n?"fas fa-times":"fas fa-hamburger"}),Object(u.jsx)("nav",{children:Object(u.jsxs)("ul",{className:n?"navigation active":"navigation",role:"navigation",children:[Object(u.jsx)("li",{onClick:function(){return t()},children:Object(u.jsx)(d.c,{to:"/",className:"nav-item",children:"Home"})}),Object(u.jsx)("li",{onClick:function(){return t()},children:Object(u.jsx)(d.c,{to:"/search",className:"nav-item",children:"Search songs"})}),Object(u.jsx)("li",{onClick:function(){return t()},children:Object(u.jsx)(d.c,{to:"/view-playlists",className:"nav-item",children:"View playlists"})})]})})]})]})},b=function(e){e.checkAccessToken,e.handleSignIn;var t=e.accessToken,n=e.expiresIn;return Object(u.jsxs)("div",{className:"home",children:[Object(u.jsx)("h2",{children:"I am home"}),""===t&&"sign in",void 0!==n&&Object(u.jsx)("p",{children:"You're good to go"})]})},m=function(e){var t=e.className,n=e.playlists,c=e.viewPlaylists;return Object(a.useEffect)((function(){document.title="View playlists | Chrisi Webster",c()}),[c]),Object(u.jsxs)("div",{className:t,children:[Object(u.jsx)("h2",{children:"View your playlists"}),Object(u.jsx)("ul",{children:n.map((function(e){return Object(u.jsx)("div",{children:e.name},e.id)}))})]})},f=(n(32),n(33),function(e){var t=e.track,n=e.remove,a=e.addTrack,c=e.removeTrack;return Object(u.jsxs)("div",{className:"tracks",children:[Object(u.jsxs)("div",{className:"flex-wrapper",children:[Object(u.jsx)("h3",{children:t.name})," ",n?Object(u.jsx)(j,{type:"submit",name:"-",onClick:function(){return c(t)}}):Object(u.jsx)(j,{type:"submit",name:"+",onClick:function(){return a(t)}})]}),Object(u.jsxs)("p",{children:[t.artist," | ",t.album]})]})}),O=function(e){var t=e.tracks,n=e.addTrack,a=e.removeTrack,c=e.remove;return Object(u.jsx)("div",{className:"track-list",children:t.map((function(e){return Object(u.jsx)(f,{track:e,addTrack:n,removeTrack:a,remove:c},e.id)}))})},v=function(e){var t=e.searchTracks,n=e.addTrack;return Object(u.jsx)("div",{className:"flex-wrapper",children:Object(u.jsx)("div",{className:"tracks-wrapper",children:Object(u.jsx)(O,{tracks:t,addTrack:n,remove:!1})})})},y=function(e){var t=e.type,n=e.label,a=e.placeholder,c=e.onChange,s=e.onBlur,r=e.id,i=e.value;return Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:r,children:n}),Object(u.jsx)("input",{id:r,type:t,value:i,placeholder:a,onChange:c,onBlur:s})]})},x=(n(34),function(e){var t=e.handleAPISearch,n=e.searchInput,a=e.handleSearchInput,c=e.handleClearSearchInput;return Object(u.jsx)("div",{className:"search-buttons",children:Object(u.jsxs)("form",{id:"search",onSubmit:function(e){return t(e)},children:[Object(u.jsx)(y,{type:"text",value:n,id:"search",placeholder:"Search for songs",onChange:function(e){return a(e)},onBlur:function(){return c()}}),Object(u.jsx)(j,{type:"submit",name:"Search"})]})})}),k=function(e){var t=e.updatePlaylistName,n=e.playlistTracks,a=e.savePlaylist,c=e.removeTrack,s=e.playlistName,r=e.setPlaylistTracks,i=e.setPlaylistName,l=e.handleClearNameInput,o=e.playlistInput;return Object(u.jsxs)("form",{id:"playlist-form",onSubmit:function(e){return function(e){e.preventDefault();var t=n.map((function(e){return e.uri}));a(s,t),i("New Playlist"),r([]),l()}(e)},children:[Object(u.jsx)(y,{type:"text",id:"playlist",value:o,onChange:function(e){return t(e)}}),Object(u.jsx)(O,{tracks:n,removeTrack:c,remove:!0}),Object(u.jsx)(j,{type:"submit",name:"Save to Spotify",id:"save-spotify"})]})},N=function(e){e.expiresIn,e.accessToken;var t=e.handleAPISearch,n=e.searchInput,c=e.addTrack,s=e.handleSearchInput,r=e.handleClearSearchInput,i=e.searchTracks,l=e.updatePlaylistName,o=e.removeTrack,h=e.savePlaylist,d=e.setPlaylistName,j=e.playlistTracks,p=e.playlistName,b=e.playlistInput,m=e.setPlaylistTracks,f=e.handleClearNameInput;return Object(a.useEffect)((function(){document.title="Search | Chrisi Webster"})),Object(u.jsxs)("div",{children:[Object(u.jsx)(x,{handleAPISearch:t,handleSearchInput:s,handleClearSearchInput:r,searchInput:n}),Object(u.jsxs)("div",{className:"search-playlist-wrapper",children:[Object(u.jsxs)("div",{className:"search-results-wrapper",children:[Object(u.jsxs)("h2",{children:["Search results (",i.length,")"]}),Object(u.jsx)(v,{searchTracks:i,addTrack:c})]}),i&&Object(u.jsxs)("div",{className:"playlist-wrapper",children:[Object(u.jsx)("h2",{children:"Add to playlist"}),Object(u.jsx)(k,{updatePlaylistName:l,removeTrack:o,savePlaylist:h,setPlaylistName:d,playlistTracks:j,searchTracks:i,playlistName:p,playlistInput:b,setPlaylistTracks:m,handleClearNameInput:f})]})]})]})},S=(n(35),function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(),r=Object(l.a)(s,2),d=r[0],j=r[1],f=Object(a.useState)(""),O=Object(l.a)(f,2),v=O[0],y=O[1],x=Object(a.useState)(),k=Object(l.a)(x,2),S=k[0],T=k[1],I=Object(a.useState)([]),w=Object(l.a)(I,2),P=w[0],g=w[1],C=Object(a.useState)(""),A=Object(l.a)(C,2),B=A[0],E=A[1],_=Object(a.useState)([]),z=Object(l.a)(_,2),J=z[0],D=z[1],V=Object(a.useState)(""),M=Object(l.a)(V,2),W=M[0],q=M[1],F=Object(a.useState)("New Playlist"),G=Object(l.a)(F,2),H=G[0],K=G[1],Y=Object(a.useState)([]),L=Object(l.a)(Y,2),Q=L[0],R=L[1],U=Object(a.useCallback)((function(){var e=window.location.href.match(/access_token=([^&]*)/),t=window.location.href.match(/expires_in=([^&]*)/);e&&t&&(y(e[1]),j(Number(t[1])),setInterval((function(){j((function(e){return e-1})),0===d&&j("")}),1e3))}),[d]),X=function(){window.location="https://accounts.spotify.com/authorize?client_id=".concat("54d03dd971f04b3e971ec3ffa241645c","&response_type=token&scope=").concat("playlist-read-private playlist-read-collaborative playlist-modify-public","&redirect_uri=").concat("http://localhost:3000/")},Z=function(e){E(e.target.value),T(B)},$=function(){E("")},ee=function(e){e.preventDefault(),fetch("https://api.spotify.com/v1/search?type=track&q=".concat(S,"&limit=50"),{headers:{Authorization:"Bearer ".concat(v)}}).then((function(e){return e.json()})).then((function(e){return e.tracks?(console.log(e),e.tracks.items.map((function(e){return{id:e.id,name:e.name,artist:e.artists[0].name,album:e.album.name,uri:e.uri}}))):[]})).then((function(e){g(e)}))},te=function(e){J.find((function(e){return e.id===J.id}))||D((function(t){return[].concat(Object(i.a)(t),[e])}))},ne=function(e){var t=J.filter((function(t){return t.id!==e.id}));D(t)},ae=function(e){K(e.target.value),q(H)},ce=function(){K("New Playlist")},se=function(e,t){if(e&&t.length){var n={Authorization:"Bearer ".concat(v)};return fetch("https://api.spotify.com/v1/me",{headers:n}).then((function(e){return e.json()})).then((function(a){var c=a.id;return fetch("https://api.spotify.com/v1/users/".concat(c,"/playlists"),{headers:n,method:"POST",body:JSON.stringify({name:e})}).then((function(e){return e.json()})).then((function(e){console.log(e);var a=e.id;return fetch("https://api.spotify.com/v1/users/".concat(c,"/playlists/").concat(a,"/tracks"),{headers:n,method:"POST",body:JSON.stringify({uris:t})})}))}))}},re=Object(a.useCallback)((function(){var e={Authorization:"Bearer ".concat(v)};if(window.location)return fetch("https://api.spotify.com/v1/me",{headers:e}).then((function(e){return e.json()})).then((function(t){var n=t.id;return fetch("https://api.spotify.com/v1/users/".concat(n,"/playlists?limit=50"),{headers:e,method:"GET"}).then((function(e){return e.json()})).then((function(e){return e.items?(console.log(e.items),e.items.map((function(e){return{id:e.id,name:e.name}}))):[]})).then((function(e){R(e)}))}))}),[v]);return Object(a.useEffect)((function(){U()})),Object(u.jsxs)("div",{children:[Object(u.jsx)(h,{title:"Playlist Maker",children:Object(u.jsx)(p,{handleNavClick:function(){c(!0!==n)},status:n,expiresIn:d,accessToken:v,handleSignIn:X})}),Object(u.jsxs)(o.c,{children:[Object(u.jsx)(o.a,{exact:!0,path:"/",render:function(){return Object(u.jsx)(b,{checkAccessToken:U,accessToken:v,expiresIn:d})}}),Object(u.jsx)(o.a,{path:"/search",render:function(){return Object(u.jsx)(N,{handleAPISearch:ee,searchInput:B,handleSearchInput:Z,handleClearSearchInput:$,updatePlaylistName:ae,removeTrack:ne,savePlaylist:se,setPlaylistName:q,playlistTracks:J,searchTracks:P,playlistName:W,playlistInput:H,addTrack:te,setPlaylistTracks:D,handleClearNameInput:ce})}}),Object(u.jsx)(o.a,{exact:!0,path:"/view-playlists",render:function(){return Object(u.jsx)(m,{viewPlaylists:re,setPlaylists:R,playlists:Q,handleSignIn:X})}})]})]})});r.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(d.a,{basename:"/playlist-maker",children:Object(u.jsx)(S,{})})}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.93e3f3ae.chunk.js.map